{"name": "P5.ipynb", "path": "notebooks/P5.ipynb", "last_modified": "2018-03-01T20:53:10.247622Z", "created": "2018-03-01T20:56:08.736536Z", "content": {"cells": [{"cell_type": "markdown", "metadata": {}, "source": "## Jyve P5\n[p5js](https://p5js.org/) is the spiritual successor to [`processing`](http://processingjs.org/), but uses bog-standard JavaScript for its execution... but does do some strange things to the environment.\n\nHere's an adaptation of their [Game of Life Example](https://p5js.org/examples/simulate-game-of-life.html)."}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": true}, "outputs": [{"data": {"text/plain": ""}, "execution_count": 1, "metadata": {}, "output_type": "execute_result"}], "source": "var w;\nvar columns;\nvar rows;\nvar board;\nvar next;"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": true}, "outputs": [{"data": {"text/plain": ""}, "execution_count": 2, "metadata": {}, "output_type": "execute_result"}], "source": "function setup() {\n  this.createCanvas(720, 800);\n  w = 20;\n  // Calculate columns and rows\n  columns = floor(width/w);\n  rows = floor(height/w);\n  // Wacky way to make a 2D array is JS\n  board = new Array(columns);\n  for (var i = 0; i < columns; i++) {\n    board[i] = new Array(rows);\n  } \n  // Going to use multiple 2D arrays and swap them\n  next = new Array(columns);\n  for (i = 0; i < columns; i++) {\n    next[i] = new Array(rows);\n  }\n  init();\n}"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": true}, "outputs": [{"data": {"text/plain": ""}, "execution_count": 3, "metadata": {}, "output_type": "execute_result"}], "source": "function draw() {\n  background(255);\n  generate();\n  for ( var i = 0; i < columns;i++) {\n    for ( var j = 0; j < rows;j++) {\n      if ((board[i][j] == 1)) fill(0);\n      else fill(255); \n      stroke(0);\n      rect(i*w, j*w, w-1, w-1);\n    }\n  }\n\n}"}, {"cell_type": "markdown", "metadata": {}, "source": "reset board when mouse is pressed"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": true}, "outputs": [{"data": {"text/plain": ""}, "execution_count": 4, "metadata": {}, "output_type": "execute_result"}], "source": "function mousePressed() {\n  init();\n}"}, {"cell_type": "markdown", "metadata": {}, "source": "Fill board randomly"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": true}, "outputs": [{"data": {"text/plain": ""}, "execution_count": 5, "metadata": {}, "output_type": "execute_result"}], "source": "function init() {\n  for (var i = 0; i < columns; i++) {\n    for (var j = 0; j < rows; j++) {\n      // Lining the edges with 0s\n      if (i == 0 || j == 0 || i == columns-1 || j == rows-1) board[i][j] = 0;\n      // Filling the rest randomly\n      else board[i][j] = floor(random(2));\n      next[i][j] = 0;\n    }\n  }\n}"}, {"cell_type": "markdown", "metadata": {}, "source": "The process of creating the new generation"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": true}, "outputs": [{"data": {"text/plain": ""}, "execution_count": 6, "metadata": {}, "output_type": "execute_result"}], "source": "function generate() {\n  // Loop through every spot in our 2D array and check spots neighbors\n  for (var x = 1; x < columns - 1; x++) {\n    for (var y = 1; y < rows - 1; y++) {\n      // Add up all the states in a 3x3 surrounding grid\n      var neighbors = 0;\n      for (var i = -1; i <= 1; i++) {\n        for (var j = -1; j <= 1; j++) {\n          neighbors += board[x+i][y+j];\n        }\n      }\n\n      // A little trick to subtract the current cell's state since\n      // we added it in the above loop\n      neighbors -= board[x][y];\n      // Rules of Life\n      if      ((board[x][y] == 1) && (neighbors <  2)) next[x][y] = 0;           // Loneliness\n      else if ((board[x][y] == 1) && (neighbors >  3)) next[x][y] = 0;           // Overpopulation\n      else if ((board[x][y] == 0) && (neighbors == 3)) next[x][y] = 1;           // Reproduction\n      else                                             next[x][y] = board[x][y]; // Stasis\n    }\n  }\n\n  // Swap!\n  var temp = board;\n  board = next;\n  next = temp;\n}"}, {"cell_type": "markdown", "metadata": {}, "source": "## A Hack\nApparently nothing happens until we instantiate `p5`."}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": true}, "outputs": [{"data": {"text/plain": "[object Object]"}, "execution_count": 7, "metadata": {}, "output_type": "execute_result"}], "source": "new p5()"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": true}, "outputs": [], "source": ""}], "metadata": {"kernelspec": {"display_name": "P5 (unsafe) \u2014 Jyve", "language": "processing", "name": "jyve-p5-unsafe"}, "language_info": {"codemirror_mode": {"name": "javascript"}, "file_extension": ".js", "mimetype": "text/javascript", "name": "javascript", "nbconvert_exporter": "javascript", "pygments_lexer": "javascript", "version": "2.2.1"}}, "nbformat": 4, "nbformat_minor": 2}, "format": "json", "mimetype": null, "writable": true, "type": "notebook"}